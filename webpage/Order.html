<!DOCTYPE html>
<html>
<head>
<!--bootstrap-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<!--css-->
<link href="css/page.css" rel="stylesheet">

<title>海大拍賣訂單頁</title>
<style>
  div.borderup{
    position:relative;
    top:0px;
    height:80px;
    background-color: #3949AB;
  }
  div.border{
    position:relative;
    top:100px;
    margin-left:380px;
    width:850px;
    height:700px;
   
    border-style:solid;
    border-width: 20px;
    border-color:blue;

    background-color:rgb(172, 70, 70);
    padding-left:20px;
    padding-top:20px;
    
  }
  p{
    font-size:20px;

  }
  table,th,td {
    
    border-collapse:collapse;
    margin-left:10px;
    font-size: 40px;
  }
  #div1{/*商品價個數量*/
    float:left;
     margin-top: 5px;
    margin-bottom: 5px;
    margin-right: 30px;
    margin-left: 40px;
    color:black;
    font-size:24px;
  }
  #div2{
    position: relative;
    top: 5px;
    background-color:blanchedalmond;
    border:3px solid #000;
    width:800px;
    height:60px;
    padding-left: 10px;
    margin-left:0px;
    margin-top:10px;
    float:left;
  }
  #div3{
    font-weight:bold;
        font-size:30px;
        color:#3949AB;
        height:30px;
        padding-left:20px; 
        padding-right: 30px;
    float:left;
  }
</style>
<script type="text/javascript">


//以下為userlist點開清單的顯示
var VisibleMenu = ''; // 記錄目前顯示的子選單的 ID

// 顯示或隱藏子選單
function switchMenu( theMainMenu, theSubMenu, theEvent ){
    var SubMenu = document.getElementById( theSubMenu );
    if( SubMenu.style.display == 'none' ){ // 顯示子選單
        SubMenu.style.minWidth = theMainMenu.clientWidth; // 讓子選單的最小寬度與主選單相同 (僅為了美觀)
        SubMenu.style.display = 'inline';
        hideMenu(); // 隱藏子選單
        VisibleMenu = theSubMenu;
    }
    else{ // 隱藏子選單
        if( theEvent != 'MouseOver' || VisibleMenu != theSubMenu ){
            SubMenu.style.display = 'none';
            VisibleMenu = '';
        }
    }
}

// 隱藏子選單
function hideMenu(){
    if( VisibleMenu != '' ){
        document.getElementById( VisibleMenu ).style.display = 'none';
    }
    VisibleMenu = '';
}
function ChangeSta(){
    
}

//以下是搜尋商品的function，目前無圖片及連結
window.onload=getProductOrder;
function getProductOrder(){

//var msg="https://cors-anywhere.herokuapp.com/https://ntou-sell.herokuapp.com/product/search?";

var msg="backend/order/get";

var request=new XMLHttpRequest;
request.open("get",msg); 

  request.onreadystatechange = function() { // Define event listener
  // If the request is complete and was successful
    if (request.readyState === 4 && request.status === 200) {
      var type = request.getResponseHeader("Content-Type");
      if (type.match(/^text/)){ // Make sure response is text
		var datastr = JSON.parse(request.responseText);
		var len  = datastr.length;
    var searchResult="";
   // var strbutt=<button type="button" onclick="changeSta()" style="width:30px;height:20px">Change</button>
		for (var i = 0; i < len; i++) {
      var content = 
      '<div id="div2">'+
      '<div id="div3">'+
        
      +datastr[i].Pdid+'&nbsp;&emsp;'+datastr[i].Pdname+'&nbsp;&emsp;'+datastr[i].Price+'&nbsp;&emsp;'+datastr[i].Amount+'&nbsp;&emsp;'+datastr[i].State+
                
      '</div>'+
      '<div id="div3">'+
      '<input type="button" style="font-size:10px;width:40px;height:30px;" id="box1" name="button2" value="更改">'+
      '</div>'+
      '</div>';
    
			searchResult=searchResult+content;
		
		};
		document.getElementById("NP").innerHTML=searchResult;
      }
    }
  };
request.send(null);

}


//logout的功能
function logout(){
localStorage.clear();


var logoutRequest=new XMLHttpRequest;
logoutRequest.open("get","backend/user/logout"); 

  logoutRequest.onreadystatechange = function() { // Define event listener
  // If the request is complete and was successful
    if (logoutRequest.readyState === 4 && logoutRequest.status === 200) {
    alert("帳號登出!");
    window.location.href="index.html";
	}
  }
logoutRequest.send(null);

//alert("帳號登出!");
//測試用 console.log(localStorage.getItem("account"));
//window.location.href="index.html";
}

</script>

</head>

<body style="margin:0px; padding:0px; background:#fff url(img/bg2.webp) center center fixed no-repeat;background-size:cover; display:block;">
  <div style="background:rgba(57,73,172,0.8);">
    <div>
	<button type="button" width="40" height="40" style="background-color:#3949AB;" onclick="switchMenu( this, 'SubMenu' )"><img src="img/list.png" width="40" height="40"></button>
    <ul id="SubMenu" class="sub-menu" style="display:none;">
	    <h2 color=#3366BB style="display:inline;">
        <li style="display:inline;"><a href="Cart.html" target="_self">&nbsp;&nbsp;Cart</a></li>   <!--連結待補 target="_blank"在新視窗打開  ="_self"同一視窗 其他_parent _top-->
        <li style="display:inline;"><a href="History.html" target="_self">&nbsp;&nbsp;History</a></li>
		<li style="display:inline;"><a href="Sell.html" target="_self">&nbsp;&nbsp;Sell</a></li>
		<li style="display:inline;"><a href="Account.html" target="_self">&nbsp;&nbsp;Account</a></li>
		<li style="display:inline;"><a color=#3366BB onclick="logout()">&nbsp;&nbsp;Logout</a></li>
		</h2>
		<br></br>
    </ul>
	
    <font color="FFFFFF"><h1 style="display:inline;">海大拍賣&nbsp;&nbsp;</h1></font>
    <!--已改用js處理<form id="search" action="https://ntou-sell.herokuapp.com/product/search" method="get" style="margin:0px;display:inline;"> <!--action接後端程式-->
	  <font color="FFFFFF"><h3 style="display:inline;">
	  關鍵字:<input id="name" type="text" name="name" value="" size="15" style=""> <!--輸入商品名字-->
	  最低價:<input id="minprice" type="text" name="minprice" value="" size="15" style=""> <!--輸入商品最低價-->
	  最高價:<input id="maxprice" type="text" name="maxprice" value="" size="15" style=""> <!--輸入商品最高價-->
	  評價:<input id="eval" type="text" name="eval" value="" size="15" style=""></font> <!--輸入商品評價(沒要選就輸入0)-->
	  <button onclick="searchProduct()" >搜尋</button>
	  </h3>
	<!--</form>-->
    </div>
  </div>
  
  <div class = "border">
    <h2>Order</h2>
    <div style="padding-left:20px">
    <div class= "borderup">
      <div id="div1">order id</div>
      <div id="div1">Name</div>
      <div id="div1">Price</div>
      <div id="div1">數量</div>
      <div id="div1">State</div>
      
    </div>
    <br>
    <div style="margin-left:0px;">
      <table id=NP width="1000" height="800">
        <tr><td>
        </td></tr>
          
      </table> 
    
      </div>
    </div>
  
  </div>
</body>

</html>
